{"version":3,"sources":["main.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","error","$","validateEmail","email","re","test","currentAnimatedIndex","imagesData","imagesDataLoaded","animating","currentPrefix","onMobileOverlay","resetPolaroid","polaroid","degrees","data","tx","ty","height","width","removeClass","css","top","left","bottom","right","animatePolaroidFromRight","polaroidIndex","windowElement","vh","vw","leftPadding","topPadding","pw","ph","Number","iheight","iwidth","rh","addClass","transform","transition","duration","rotate","animatePolaroidFromLeft","previousImage","prefix","totalImages","length","index","nextImage","startGallery","hide","show","position","stopGallery","animate","scrollTop","on","loadPolaroid","polaroidGallerySelector","images","polaroidGalleryElement","event","this","stopPropagation","forEach","polaroidElement","description","Math","min","mainVariations","roomVariations","variations","sign","random","xsign","ysign","floor","find","url","append","image","Image","name","src","onload","loadImages","gallerySelector","getJSON","document","ready","owlCarousel","items","autoplay","autoplayTimeout","loop","mouseenter","roomElement","setTimeout","offset","mouseleave","smoothScroll","delegateSelector","headerElement","contentElement","scroll","fromTop","windowHeight","ratio","windowWidth","maxHeight","preventDefault","open","showFormError","text","hideError","showFlashMessage","message","val","prop","ajax","type","contentType","JSON","stringify","success","submit","to"],"mappings":"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","file":"main.min.js","sourcesContent":["/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n  var $ = window.$;\n\n  // var UtilsFactory = function() {\n  //\n  // };\n  //\n  // UtilsFactory.prototype = {\n  //   constructor: UtilsFactory,\n  //   isElementInView: function(element, fullyInView) {\n  //     var pageTop = $(window).scrollTop();\n  //     var pageBottom = pageTop + $(window).height();\n  //     var elementTop = $(element).offset().top;\n  //     var elementBottom = elementTop + $(element).height();\n  //     var inView = false;\n  //\n  //     if (fullyInView === true) {\n  //       inView = ((pageTop < elementTop) && (pageBottom > elementBottom));\n  //     } else {\n  //       inView = ((elementTop <= pageBottom) && (elementBottom >= pageTop));\n  //     }\n  //     return inView;\n  //   }\n  // };\n  //\n  // var Utils = new UtilsFactory();\n  // Your custom JavaScript goes here\n\n  var validateEmail = function(email) {\n    // eslint-disable-next-line max-len\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  };\n  var currentAnimatedIndex = -1;\n  var imagesData = {};\n  var imagesDataLoaded = false;\n  var animating = false;\n  var currentPrefix = 'none';\n  var onMobileOverlay = false;\n\n  var resetPolaroid = function() {\n    var polaroid = $('.polaroid.expanded');\n    var degrees = polaroid.data('degrees');\n    var tx = polaroid.data('tx');\n    var ty = polaroid.data('ty');\n    var height = polaroid.data('height');\n    var width = polaroid.data('width');\n\n    polaroid.removeClass('expanded')\n      .css({\n        height: height,\n        width: width,\n        top: 'auto',\n        left: 'auto',\n        bottom: 'auto',\n        right: 'auto'\n      });\n    polaroid.css('transform', 'rotate(' + degrees + ')' +\n                                       'translate(' + tx + ',' + ty + ')');\n  };\n\n  var animatePolaroidFromRight = function(polaroid) {\n    var polaroidIndex = polaroid.data('index');\n\n    if (animating || polaroidIndex === currentAnimatedIndex) {\n      return;\n    }\n    animating = true;\n    var windowElement = $(window);\n    var vh = windowElement.height();\n    var vw = windowElement.width();\n    var leftPadding = 100;\n    var topPadding = 50;\n    if (vw > 1300) {\n      leftPadding = (vw - 1100) / 2;\n    } else if (vw > 600) {\n      leftPadding = 100;\n    } else {\n      leftPadding = 50;\n    }\n    var pw = vw - 2 * leftPadding;\n    var ph = vh - 2 * topPadding;\n    var degrees = polaroid.data('degrees');\n    resetPolaroid();\n    currentAnimatedIndex = Number(polaroid.data('index'));\n    var iheight = Number(polaroid.data('iheight'));\n    var iwidth = Number(polaroid.data('iwidth'));\n    var rh = (iheight / iwidth) * (pw - 40) + 70;\n    /* Readjust if pw if ph is greater than possible height */\n    if (rh > ph) {\n      pw = (iwidth / iheight) * (ph - 70) + 40;\n      leftPadding = (vw - pw) / 2;\n    } else {\n      ph = rh;\n    }\n    topPadding = (vh - ph) / 2;\n    polaroid.addClass('expanded');\n    if (vw > 600) {\n      polaroid.css({bottom: 0,\n                    right: 0,\n                    transform: 'rotate(' + degrees + ')'})\n              .transition({top: topPadding,\n                right: leftPadding,\n                height: ph,\n                width: pw,\n                duration: 1000,\n                rotate: 0}, function() {\n                  animating = false;\n                });\n    } else {\n      polaroid.css({top: topPadding,\n                right: leftPadding,\n                height: ph,\n                width: pw,\n                rotate: 0});\n      animating = false;\n    }\n  };\n\n  var animatePolaroidFromLeft = function(polaroid) {\n    if (animating) {\n      return;\n    }\n    animating = true;\n    var windowElement = $(window);\n    var vh = windowElement.height();\n    var vw = windowElement.width();\n    var leftPadding = 100;\n    var topPadding = 50;\n    if (vw > 1300) {\n      leftPadding = (vw - 1100) / 2;\n    } else if (vw > 600) {\n      leftPadding = 100;\n    } else {\n      leftPadding = 50;\n    }\n    var pw = vw - 2 * leftPadding;\n    var ph = vh - 2 * topPadding;\n    var degrees = polaroid.data('degrees');\n    currentAnimatedIndex = Number(polaroid.data('index'));\n    var iheight = polaroid.data('iheight');\n    var iwidth = polaroid.data('iwidth');\n    var rh = (iheight / iwidth) * (pw - 40) + 70;\n    /* Readjust if pw if ph is greater than possible height */\n    if (rh > ph) {\n      pw = (iwidth / iheight) * (ph - 70) + 40;\n      leftPadding = (vw - pw) / 2;\n    } else {\n      ph = rh;\n    }\n    topPadding = (vh - ph) / 2;\n    polaroid.addClass('expanded');\n    if (vw > 600) {\n      polaroid.css({top: 0,\n                    left: 0,\n                    transform: 'rotate(' + degrees + ')'})\n              .transition({top: topPadding,\n                left: leftPadding,\n                height: ph,\n                width: pw,\n                duration: 1000,\n                rotate: 0}, function() {\n                  animating = false;\n                });\n    } else {\n      polaroid.css({top: topPadding,\n                left: leftPadding,\n                height: ph,\n                width: pw,\n                rotate: 0});\n      animating = false;\n    }\n  };\n\n  var previousImage = function(prefix) {\n    if (!animating) {\n      var totalImages = imagesData[prefix].length;\n      var index = currentAnimatedIndex === 0 ?\n                    totalImages - 1 : (currentAnimatedIndex - 1);\n      var polaroid = $('#' + prefix + '-polaroid-' + index);\n      resetPolaroid();\n      animatePolaroidFromLeft(polaroid);\n    }\n  };\n\n  var nextImage = function(prefix) {\n    if (!animating) {\n      var totalImages = imagesData[prefix].length;\n      var index = (currentAnimatedIndex + 1) % totalImages;\n      var polaroid = $('#' + prefix + '-polaroid-' + index);\n\n      resetPolaroid();\n\n      animatePolaroidFromRight(polaroid);\n    }\n  };\n\n  var startGallery = function(polaroid) {\n    currentPrefix = polaroid.data('prefix');\n    if (currentPrefix === 'main' && onMobileOverlay) {\n      return;\n    }\n    $('header').hide();\n    $('#next').show();\n    $('#previous').show();\n    if (currentPrefix === 'main') {\n      $('#gallery-overlay').show();\n      $('#polaroid-gallery').addClass('gallery');\n    } else {\n      $('#' + currentPrefix + '-polaroid-gallery').addClass('gallery');\n      $('.room.' + currentPrefix).addClass('expanded').css({\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n      });\n    }\n    animatePolaroidFromRight(polaroid);\n  };\n  var stopGallery = function() {\n    resetPolaroid();\n    $('header').show();\n    $('#next').hide();\n    $('#previous').hide();\n    if (currentPrefix === 'main') {\n      $('#gallery-overlay').hide();\n      $('#polaroid-gallery').removeClass('gallery');\n    } else {\n      $('.room.' + currentPrefix).removeClass('expanded').css({\n        position: 'relative',\n        top: 'auto',\n        left: 'auto',\n        bottom: 'auto',\n        right: 0\n      });\n    }\n    currentAnimatedIndex = -1;\n    currentPrefix = 'none';\n    $('html, body').animate({scrollTop: '+=10px'}, 300);\n  };\n\n  $('.rooms').on('click', '.room.expanded', function() {\n    stopGallery();\n  });\n\n  var loadPolaroid = function(polaroidGallerySelector, prefix, images) {\n    var polaroidGalleryElement = $(polaroidGallerySelector);\n    polaroidGalleryElement.on('click', '.polaroid', function(event) {\n      var polaroid = $(this);\n      event.stopPropagation();\n      startGallery(polaroid);\n    });\n    polaroidGalleryElement.on('click', '.close', function(event) {\n      event.stopPropagation();\n      stopGallery();\n    });\n    images.forEach(function(polaroid, index) {\n      var polaroidElement = $('<div title=\"click-me\" class=\"polaroid\" id=\"' +\n                                prefix +\n                                '-polaroid-' + index + '\">' +\n                                '<div class=\"close\">&#x2715;</div>' +\n                                '<div class=\"image\"></div>' +\n                                '<div class=\"description\">' +\n                                polaroid.description +\n                                '</div>' +\n                              '</div>');\n      var vw = Math.min($(window).width(), 1300);\n      var mainVariations = {\n        degrees: [1, 10],\n        height: [0.17 * vw, 0.25 * vw],\n        width: [0.17 * vw, 0.25 * vw],\n        tx: 10,\n        ty: 125\n      };\n      var roomVariations = {\n        degrees: [1, 10],\n        height: [140, 180],\n        width: [180, 220],\n        tx: 35,\n        ty: 35\n      };\n      if (vw < 620) {\n        mainVariations = {\n          degrees: [1, 10],\n          height: [0.23 * vw, 0.30 * vw],\n          width: [0.23 * vw, 0.30 * vw],\n          tx: 10,\n          ty: 35\n        };\n        roomVariations = {\n          degrees: [1, 10],\n          height: [60, 100],\n          width: [60, 100],\n          tx: 0,\n          ty: 0\n        };\n      }\n      var variations = prefix === 'main' ? mainVariations : roomVariations;\n      var sign = Math.random() <= 0.5 ? '-' : '';\n      var xsign = Math.random() <= 0.5 ? '-' : '';\n      var ysign = Math.random() <= 0.85 ? '-' : '';\n      var height = Math.floor(Math.random() *\n                    (variations.height[1] - variations.height[0]) +\n                    variations.height[0]);\n      var width = Math.floor(Math.random() *\n                    (variations.width[1] - variations.width[0]) +\n                    variations.width[0]);\n      var tx = xsign + Math.floor(Math.random() *\n          (variations.tx * width /\n            (variations.width[0] + variations.width[1]))) + 'px';\n      var ty = ysign + Math.floor(Math.random() *\n          (variations.ty * height /\n            (variations.height[0] + variations.height[1]))) + 'px';\n      var degrees = sign + Math.floor(Math.random() *\n          (variations.degrees[1] - variations.degrees[0]) +\n          variations.degrees[0]) + 'deg';\n      if (index === 0) {\n        tx = ty = '0px';\n      }\n      width += 'px';\n      height += 'px';\n      polaroidElement.data('prefix', prefix);\n      polaroidElement.data('degrees', degrees);\n      polaroidElement.data('tx', tx);\n      polaroidElement.data('ty', ty);\n      polaroidElement.data('index', index);\n      polaroidElement.data('height', height);\n      polaroidElement.data('width', width);\n      polaroidElement.css({\n        height: height,\n        width: width,\n        transform: 'rotate(' + degrees + ')' +\n                                         'translate(' + tx + ',' + ty + ')'\n      });\n      polaroidElement.find('.image')\n                     .css('background-image', 'url(' + polaroid.url + ')');\n      polaroidGalleryElement.append(polaroidElement);\n      var image = new Image();\n      image.name = polaroid.url;\n      image.src = polaroid.url;\n      image.onload = function() {\n        polaroidElement.data('iheight', this.height);\n        polaroidElement.data('iwidth', this.width);\n      };\n    });\n  };\n\n  var loadImages = function(gallerySelector, prefix) {\n    if (imagesDataLoaded) {\n      loadPolaroid(gallerySelector, prefix, imagesData[prefix]);\n    } else {\n      $.getJSON('/images.json', function(data) {\n        imagesData = data;\n        imagesDataLoaded = true;\n        loadPolaroid(gallerySelector, prefix, imagesData[prefix]);\n      });\n    }\n  };\n\n  $(document).ready(function() {\n    /* Main Hero element carousel code */\n    $('.owl-carousel').owlCarousel({\n      items: 1,\n      autoplay: true,\n      autoplayTimeout: 4000,\n      loop: true\n    });\n\n    loadImages('#polaroid-gallery', 'main');\n    loadImages('#single-polaroid-gallery', 'single');\n    loadImages('#double-polaroid-gallery', 'double');\n    loadImages('#triple-polaroid-gallery', 'triple');\n\n    $('#gallery-overlay').on('click', function(event) {\n      stopGallery();\n      event.stopPropagation();\n    });\n    $('#next').on('click', function() {\n      nextImage(currentPrefix);\n    });\n    $('#previous').on('click', function() {\n      previousImage(currentPrefix);\n    });\n\n    $('.room-overlay').mouseenter(function() {\n      $('#polaroid-gallery').hide();\n      var roomElement = $(this);\n      onMobileOverlay = true;\n      setTimeout(function() {\n        $('html, body').animate({\n          scrollTop: roomElement.offset().top - 35}, 400);\n      }, 200);\n    });\n    $('.room-overlay').mouseleave(function(event) {\n      if (currentPrefix === 'none') {\n        event.stopPropagation();\n        $('#polaroid-gallery').show();\n        setTimeout(function() {\n          onMobileOverlay = false;\n        }, 400);\n      }\n    });\n\n    /* Adding smoothness to scroll on navigation click */\n    $('body').smoothScroll({\n      offset: -60,\n      delegateSelector: 'header a'\n    });\n\n    /* Making sticky header visible on scroll after hero element */\n    var headerElement = $('header');\n    var contentElement = $('#content');\n    $(window).scroll(function() {\n      var offset = 5;\n      var fromTop = $(this).scrollTop() + offset;\n      var windowHeight = $(this).height();\n      var ratio = (fromTop / windowHeight * 100);\n      var windowWidth = $(this).width();\n      var maxHeight = 460;\n      if (windowWidth < 600) {\n        maxHeight = 210;\n      }\n      if (ratio >= 90 || fromTop > maxHeight) {\n        headerElement.addClass('fixed');\n        contentElement.addClass('fixed');\n      } else {\n        headerElement.removeClass('fixed');\n        contentElement.removeClass('fixed');\n      }\n    });\n\n    /* Site minder integration */\n    $('.book').on('click', function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      window.open('https://app-apac.thebookingbutton.com' +\n                  '/properties/gilikhayangandirect', '_blank');\n    });\n\n    /* Sending email on form submit and validation */\n\n    var showFormError = function(error) {\n      $('.form-error').text(error).removeClass('hide');\n    };\n\n    var hideError = function() {\n      $('.form-error').addClass('hide');\n    };\n\n    var showFlashMessage = function(message) {\n      $('#flash-message').addClass('show').text(message);\n      setTimeout(function() {\n        $('#flash-message').removeClass('show');\n      }, 1500);\n    };\n\n    $('#sign-up').on('click', function() {\n      var email = $('#subscriber').val();\n      if (!validateEmail(email)) {\n        $('.subscriber-error').show();\n        return;\n      }\n      $('.subscriber-error').hide();\n      $('#signup').prop('disabled', true);\n      $.ajax({\n        url: 'http://gilikhayangan-shastri9999.c9users.io:8081/subscribe',\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(\n          {\n            email: email\n          }\n        ),\n        success: function() {\n          showFlashMessage('You have successfully subscribed!');\n          $('#signup').prop('disabled', false);\n          $('#subscriber').val('');\n        }\n      });\n    });\n\n    $('#say-hello-form').submit(function(event) {\n      var message = $('#message').val();\n      var email = $('#email').val();\n      var name = $('#name').val();\n\n      event.preventDefault();\n\n      hideError();\n      if (!name) {\n        showFormError('Please fill in the Name.');\n        return;\n      }\n      if (!validateEmail(email)) {\n        showFormError('Please fill in valid Email.');\n        return;\n      }\n      if (!message) {\n        showFormError('Please fill in the Message.');\n        return;\n      }\n\n      $('.submit').prop('disabled', true);\n      $('.form-loading').removeClass('hide');\n      $.ajax({\n        url: 'http://gilikhayangan-shastri9999.c9users.io:8081/',\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(\n          {\n            to: name + ' <' + email + '>',\n            message: message\n          }\n        ),\n        success: function() {\n          showFlashMessage('Your Message has reached us!');\n          $('.submit').prop('disabled', false);\n          $('#message').val('');\n          $('#email').val('');\n          $('#name').val('');\n          $('.form-loading').addClass('hide');\n        }\n      });\n    });\n  });\n})();\n"]}